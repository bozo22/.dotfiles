#!/bin/sh

# desktop

if [[ $(xrandr -q | grep 'HDMI2 connected') ]]; then
    xrandr --output HDMI2 --primary --mode 2560x1440 --right-of eDP1 && bspc monitor HDMI2 -d 1 2 3 4 && bspc monitor eDP1 -d z x c v
else
    xrandr --output eDP1 --primary --mode 1920x1080 && bspc monitor eDP1 -d 1 2 3 4
fi
feh --bg-fill ~/.dotfiles/wallpaper.jpg
bash "$HOME/.config/polybar/launch.sh"
picom & disown

# input

pgrep -x sxhkd > /dev/null || sxhkd &
ksuperkey -e 'Super_L=Super_L|Alt_L|Shift_L|r'
setxkbmap -option caps:swapescape
libinput-gestures-setup start
xset r rate 350 50

# bswm config

bspc config window_gap          5

bspc config split_ratio          0.5
bspc config borderless_monocle   true
bspc config gapless_monocle      true

bspc config focused_border_color '#8959A8'
bspc config normal_border_color '#000000'
bspc config border_width 2

bspc rule -a Gimp desktop='^8' state=floating follow=on
bspc rule -a Nm-connection-editor state=floating follow=on
bspc rule -a MEGAsync state=floating border=off
bspc rule -a firefox desktop=2 follow=on
bspc rule -a mplayer2 state=floating
bspc rule -a Kupfer.py focus=on
bspc rule -a Screenkey manage=off

# autostart apps

if ! pgrep -x "megasync" > /dev/null
then
    megasync & disown
fi
